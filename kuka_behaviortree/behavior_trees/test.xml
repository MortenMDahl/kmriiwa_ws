
<root main_tree_to_execute="TestTree">

    <BehaviorTree ID="MainTree">
        <Sequence name="main_sequence">
            <SubTree ID="FindObject"/>
            <SubTree ID="HandleObject"/>
        </Sequence>
    </BehaviorTree> 

    <BehaviorTree ID="TestTree2">
        <Sequence name="sequence">
            <PlanManipulatorPath plan_to_frame="search_1"/>
        </Sequence>
    </BehaviorTree> 

    <BehaviorTree ID="TestTree">
        <Sequence name="main_sequence">
            <PlanManipulatorPath plan_to_frame="home"/>
            <SubTree ID="TestTree2"/>
        </Sequence>
    </BehaviorTree> 





    <BehaviorTree ID="FindObject">
        <Fallback name="search_object">
            <Sequence name="search_frame1">
                <SubTree ID="MoveToFrame" frame="search_1"/>
                <ObjectSearch/>
            </Sequence>
            <Sequence name="search_frame2">
                <SubTree ID="MoveToFrame" frame="search_2"/>
                <ObjectSearch/>
            </Sequence>
            <Sequence name="search_frame3">
                <SubTree ID="MoveToFrame" frame="search_3"/>
                <ObjectSearch/>
            </Sequence>
        </Fallback>
    </BehaviorTree>

    <BehaviorTree ID="HandleObject">
        <Sequence name="handle_object_sequence">
            <Sequence name="pick_object">
                <CloseGripper/>
            </Sequence>
            <Sequence name="leave_object">
                <Fallback name="find_empty_frame">
                <Fallback name="check_empty_frame">
                    <FrameEmpty check_frame="frame1"/>
                    <FrameEmpty check_frame="frame2"/>
                    <FrameEmpty check_frame="frame3"/>
                </Fallback>
                <ForceFailure name="force_failure">
                    <OpenGripper/>
                </ForceFailure>
                </Fallback>
                <PlanManipulatorPath plan_to_frame="{frame}"/>
               
                <OpenGripper/>
            </Sequence>
        </Sequence>
    </BehaviorTree>

    <BehaviorTree ID="MoveToFrame">
        <Sequence name="main_move_to_frame">
            <PlanManipulatorPath plan_to_frame="{frame}"/>
            <MoveManipulator path="{path}" move_to_frame="{move_to_frame}"/>
            <MoveManipulator path="{path}"/>
        </Sequence>
    </BehaviorTree>

    <BehaviorTree ID="MoveToObject">
        <Sequence name="main_move_to_object">
            <PlanManipulatorPath plan_to_frame="{frame}" ObjectPose="{pose}"/>
            <MoveManipulator path="{path}"/>
        </Sequence>
    </BehaviorTree>
</root>